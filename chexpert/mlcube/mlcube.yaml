name: MLCommons Chexpert
description: MLCommons Chexpert example for inference with the Chexpert model.
authors:
 - {name: "MLCommons Best Practices Working Group"}

platform:
  accelerator_count: 0

docker:
  # Image name.
  image: mlcommons/chexpert:0.0.1
  # Docker build context relative to $MLCUBE_ROOT. Default is `build`.
  build_context: "../project"
  # Docker file name within docker build context, default is `Dockerfile`.
  build_file: "Dockerfile"

tasks:
  download_model:
  # Download model files
    parameters:
      outputs: {model_dir: model/}
  preprocess:
    parameters:
      inputs: {data_dir: data/CheXpert-v1.0-small}
  infer:
  # predict on data
    parameters:
      inputs: {data_dir: data/CheXpert-v1.0-small, model_dir: model/}
      outputs: {log_dir: inference_logs/, out_dir: ./}
